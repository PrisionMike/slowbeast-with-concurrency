# -*- Python -*-
# vim: set filetype=python:
# vim: ts=2:sts=2:sw=2:et:tw=80:

# Configuration file for the 'lit' test runner.

from os.path import join, dirname
import lit.util
import lit.formats

# name: The name of this test suite.
config.name = 'Slowbeast C/LLVM tests'

# testFormat: The test format to use to interpret tests.
config.test_format = lit.formats.ShTest(execute_external=False)

# suffixes: A list of file extensions to treat as test files
# Note this can be overridden by lit.local.cfg files
config.suffixes = ['.c', '.ll', '.cpp']

# test_source_root: The root path where tests are located.
config.test_source_root = join(dirname(__file__), 'c/')

opts = lit_config.params.get('OPTS')
if opts:
  config.substitutions.append(('%opts', opts))
  if '-kind' in opts:
    config.available_features.add('kind')
    if '-kind-naive' in opts:
      config.available_features.add('kind-naive')
  else:
    config.available_features.add('nokind')

